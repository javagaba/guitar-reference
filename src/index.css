@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;600&display=swap");
@import "tailwindcss";

@theme {
  --font-sans: "Inter", -apple-system, sans-serif;
  --font-mono: "JetBrains Mono", monospace;

  --color-bg: #1a1a1a;
  --color-card: #242424;
  --color-border: #333;
  --color-muted: #666;
  --color-subtle: #888;
  --color-text: #e8e8e8;
  --color-text-dim: #bbb;
  --color-text-dimmer: #aaa;

  --color-major: #3498db;
  --color-minor: #9b59b6;
  --color-dim: #e74c3c;
}

/* Note colors are consumed via inline styles (getNoteColor), not Tailwind
   utilities, so they must live outside @theme to avoid tree-shaking. */
@layer base {
  :root {
    --color-note-c: #ff6b6b;
    --color-note-d: #ffa94d;
    --color-note-e: #69db7c;
    --color-note-f: #74c0fc;
    --color-note-g: #b197fc;
    --color-note-a: #63e6be;
    --color-note-b: #f783ac;

    --color-degree-1: #e8e8e8;
    --color-degree-2: #e8d44d;
    --color-degree-3: #e84393;
    --color-degree-4: #a3e635;
    --color-degree-5: #22d3ee;
    --color-degree-6: #ff6348;
    --color-degree-7: #8b5cf6;
    --color-degree-8: #fb7185;
  }

  :focus-visible {
    outline: 2px solid #3498db;
    outline-offset: 2px;
  }

  svg g:focus-visible {
    outline: 2px solid #3498db;
    outline-offset: 4px;
    border-radius: 50%;
  }
}

@keyframes note-ping {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4);
  }
  50% {
    transform: scale(1.3);
    box-shadow: 0 0 12px 4px rgba(255, 255, 255, 0.2);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
  }
}

.note-ping {
  animation: note-ping 300ms ease-out;
}

.collapsible {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.3s ease;
}

.collapsible-open {
  grid-template-rows: 1fr;
}

.collapsible > * {
  overflow: hidden;
}

@keyframes beat-pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.5);
  }
  100% {
    transform: scale(1);
  }
}

.beat-pulse {
  animation: beat-pulse 150ms ease-out;
}

/* Long-press fill feedback */
@keyframes long-press-fill {
  0% {
    background-size: 0% 100%;
  }
  100% {
    background-size: 100% 100%;
  }
}

.tuner-needle {
  transition: x1 0.1s ease-out, y1 0.1s ease-out, x2 0.1s ease-out, y2 0.1s ease-out, stroke 0.15s ease;
}

@keyframes tuner-glow-pulse {
  0%, 100% {
    opacity: 0.3;
    r: 5;
  }
  50% {
    opacity: 0.6;
    r: 8;
  }
}

.tuner-glow {
  animation: tuner-glow-pulse 1.2s ease-in-out infinite;
}

.touch-manipulation:active {
  background-image: linear-gradient(rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08));
  background-repeat: no-repeat;
  background-position: left;
  background-size: 0% 100%;
  animation: long-press-fill 500ms ease-out forwards;
}
